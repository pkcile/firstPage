<!DOCTYPE html>
<!-- 重要 -->
<html lang="zh">
	<head>
		<title>Canvas tutorial</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<style type="text/css">
			body {
				width: 100%;
				margin: 0;
				padding: 0;
				background-color: #abc;
			}

			/* 画布的样式 */
			canvas {
				display: block;
				margin: 20px auto;
				border: none;
			}

			/* 按钮的样式 */
			.centerButton {
				width: 100px;
				margin: 0 auto;
			}

			button {
				display: block;
				width: 80px;
				height: 60px;
				background-color: #ccc;
			}

			#up {
				margin-bottom: 10px;
			}

			.floatButton01 {
				position: relative;
				left: -90px;
				top: -60px;
			}

			.floatButton02 {
				position: relative;
				left: 90px;
				top: -120px;
			}
		</style>
		<script type="text/javascript">
			window.onload = function() {
				function drawInitial() { //绘制线
					var canvas = document.getElementById("tutorial");
					if (!canvas.getContext) return;
					var ctx = canvas.getContext("2d");
					ctx.strokeStyle = "#000000";
					//横线向下
					for (var i = 0; i <= 10; i++) {
						ctx.lineWidth = 4;
						ctx.moveTo(0, 2 + 40 * i);
						ctx.lineTo(404, 2 + 40 * i);
						ctx.stroke();
					}
					//竖线向右
					for (var k = 0; k <= 10; k++) {
						ctx.lineWidth = 4;
						ctx.moveTo(40 * k + 2, 0);
						ctx.lineTo(40 * k + 2, 404);
						ctx.stroke();
					}
				}

				function draw(arrX, arrY) { //绘制方块
					var canvas = document.getElementById('tutorial');
					if (!canvas.getContext) return;
					var ctx = canvas.getContext("2d");
					ctx.fillStyle = "red";
					for (var i = 0; i < arrX.length; i++) {
						ctx.fillRect(4 + arrX[i] * 40, 4 + arrY[i] * 40, 36, 36);
					}

				}

				function clear01() { //清除方块
					var canvas = document.getElementById("tutorial");
					if (canvas.getContext) {
						var ctx = canvas.getContext("2d");
						ctx.fillStyle = "#eee";
						for (var i = 0; i < arrX.length; i++) {
							ctx.fillRect(4 + arrX[i] * 40, 4 + arrY[i] * 40, 36, 36);
						}
					}
				}

				function border() { //边界判断
					for (var i = 0; i < arrX.length; i++) {
						if (arrX[i] < 0 || arrX[i] >= 10 || arrY[i] < 0 || arrY[i] >= 10) {
							alert("你已经死亡");
							reset(); //重置
							return;
						}
					}
				}

				function reset() { //重置

				}
				//初始状态
				//蛇身x、y坐标初始化
				var arrX = new Array();
				var arrY = new Array();
				arrX[0] = 0;
				arrY[0] = 0;
				//食物x、y坐标初始化
				var arrxAdd = new Array();
				var arryAdd = new Array();
				arrxAdd[0] = 5;
				arryAdd[0] = 5;
				//蛇、食物初始化
				draw(arrX, arrY);
				draw(arrxAdd, arryAdd);
				drawInitial()
				// 按钮对象
				var btn01 = document.getElementById("up");
				var btn02 = document.getElementById("down");
				var btn03 = document.getElementById("left");
				var btn04 = document.getElementById("right");
				// 按钮事件
				btn01.onclick = function() { //上
					clear01(); //清除			
					if (arrX.length >= 1) { //是否成立
						var temp = -1; //标识
						if (arrX[0] == arrxAdd[0] && (arrY[0] - 1) == arryAdd[0]) {//y蛇头移动一个位置后与食物位置比较
							temp = 1;
							var tempX = arrX[arrX.lengh - 1];
							var tempY = arrY[arrY.lengh - 1];
							// alert("test");
						}
						if (arrX.length >= 2) {//除蛇头外的位置前进一个单位
							for (var i = arrX.lengh; i > 0; i--) {
								arrX[i - 1] = arrX[i - 2];
								arrY[i - 1] = arrY[i - 2];
							}
						}

					}
					arrY[0] += -1;//蛇头前进一个单位
					if (temp == 1) {
						arrX[arrX.length] = 7;
						arrY[arrX.length] = 7;
						alert(arrX[arrX.length]);
						//消除arrxAdd、arryAdd
						// alert("test");
					}
					border();
					draw(arrX, arrY);
					draw(arrxAdd, arryAdd);
					// document.write("12324");

				}
				btn02.onclick = function() { //下
					clear01();
					if (arrX.length >= 1) { //是否成立
						var temp = -1;
						if (arrX == arrxAdd[0] && (arrY+1) == arryAdd[0]) {
							temp = 1;
							var tempX = arrX[arrX.lengh - 1];
							var tempY = arrY[arrY.lengh - 1];
							// alert("test");
						}
						if (arrX.length >= 2) {
							for (var i = arrX.lengh; i > 0; i--) {
								arrX[i - 1] = arrX[i - 2];
								arrY[i - 1] = arrY[i - 2];
							}
						}
					}
					arrY[0] += 1;
					if (temp == 1) {
						arrX[arrX.length] = 7;
						arrY[arrX.length] = 7;
						//消除arrxAdd、arryAdd
						alert(arrX[arrX.length]);
					}
					border();
					draw(arrX, arrY);
					draw(arrxAdd, arryAdd);
				}
				btn03.onclick = function() { //左
					// alert("test");
					clear01();
					if (arrX.length >= 1) { //是否成立
						var temp = -1;
						if ((arrX[0] - 1) == arrxAdd[0] && arrY[0] == arryAdd[0]) {
							temp = 1;
							var tempX = arrX[arrX.lengh - 1];
							var tempY = arrY[arrY.lengh - 1];
							// alert("test");
						}
					
						if (arrX.length >= 2) {
							for (var i = arrX.lengh; i > 0; i--) {
								arrX[i - 1] = arrX[i - 2];
								arrY[i - 1] = arrY[i - 2];
							}
						}
					
					}
					// alert("test2");
					arrX[0] -= 1;
					if (temp == 1) { //添加
						arrX[arrX.length] = 7;
						arrY[arrX.length] = 7;
						alert(arrX[arrX.length]);
						//消除arrxAdd、arryAdd
					}
					border();
					draw(arrX, arrY);
					draw(arrxAdd, arryAdd);
				}
				btn04.onclick = function() { //右
					clear01();
					if (arrX.length >= 1) { //是否成立
						var temp = -1;
						if ((arrX[0] + 1) == arrxAdd[0] && arrY[0] == arryAdd[0]) {
							temp = 1;
							var tempX = arrX[arrX.lengh - 1];
							var tempY = arrY[arrY.lengh - 1];
						}

						if (arrX.length >= 2) {
							for (var i = arrX.lengh; i > 0; i--) {
								arrX[i - 1] = arrX[i - 2];
								arrY[i - 1] = arrY[i - 2];
							}
						}

					}
					// alert("test2");
					arrX[0] += 1;
					if (temp == 1) { //添加
						arrX[arrX.length] = 7;
						arrY[arrX.length] = 7;
						alert(arrX[arrX.length]);
						
						//消除arrxAdd、arryAdd
					}
					border();
					draw(arrX, arrY);
					draw(arrxAdd, arryAdd);
				}
			}
		</script>
	</head>
	<body>
		<canvas id="tutorial" width="404px" height="404px"></canvas>
		<div class="centerButton">
			<button id="up">上</button>
			<button id="down">下</button>
			<button id="left" class="floatButton01">左</button>
			<button id="right" class="floatButton02">右</button>
		</div>

		<script type="text/javascript">

		</script>
	</body>
</html>
